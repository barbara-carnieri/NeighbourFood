
<div class="container-fluid">
  <h1>{{ mealEvent.eventName }}</h1>
  <div class="event-container">
    <img src="{{ mealEvent.eventImg }}" alt="Event image" width="300">
    
    <div>
      <p> Date: {{ mealEvent.date }}</p>

      {{#ifeqId mealEvent.host._id userInfo._id }}
        <p>Host: yourself</p>
      {{else}}
        <p> Host: <a href="/profile/{{ mealEvent.host._id }}">{{mealEvent.host.name}}</a></p>
      {{/ifeqId}}

      {{#if mealEvent.acceptedGuests}}
        <p>Guests attending this event:</p>
        <ul>
        {{#each mealEvent.acceptedGuests}}
          <li><a href="/profile/{{this._id}}">{{this.name}}</a></li>
        {{/each}}
        </ul>
      {{/if}}

      <p> Cuisine: {{ mealEvent.cuisine }} </p>
      <p> Number of guests: {{ mealEvent.numberAttend }}</p>
    </div>

    <div>
      <p> Dish: {{ mealEvent.dish }}</p>
      <p> Neighbourhood: {{ mealEvent.host.address.zipcode }}</p>
      <p> Description: {{ mealEvent.eventDescription }}</p>
    </div>
  <div>

  <div>
    {{!-- if current user is the host of this event --}}
    {{#ifeqId mealEvent.host._id userInfo._id }}

      <button><a href="/meal-events/{{mealEvent._id}}/edit">Edit this event</a></button>
      <button><a href="/meal-events/{{mealEvent._id}}/delete">Delete this event</a></button>

    {{else}}


      {{#if type.accepted}}
        <div>
          <p>You attend this event</p>
          <p>This is the address:</p>
          <ul>
            <li>{{ mealEvent.host.address.street }}</li>
            <li>{{ mealEvent.host.address.houseNumber }}</li>
            <li>{{ mealEvent.host.address.zipcode }}</li>
            <li>{{ mealEvent.host.address.city }}</li>
          </ul>
          </div>
          <form action="/meal-events/{{mealEvent._id}}/cancel" method="POST">
            <button type="submit">Cancel attendance</button>
          </form>
      {{else if type.pending}}
        <button>Pending</button>
      {{else}}
        <form action="/meal-events/{{mealEvent._id}}/attend" method="POST">
          <button type="submit">Attend</button>
        </form>
      {{/if}}
      {{!-- if current user is a confirmed guest of this event --}}
      {{!-- {{#each mealEvent.acceptedGuests}}
        {{#ifeqId this._id ../userInfo._id}}
          <div>
          <p>You attend this event</p>
          <p>This is the address:</p>
          <ul>
            <li>{{ ../mealEvent.host.address.street }}</li>
            <li>{{ ../mealEvent.host.address.houseNumber }}</li>
            <li>{{ ../mealEvent.host.address.zipcode }}</li>
            <li>{{ ../mealEvent.host.address.city }}</li>
          </ul>
          </div>
          <form action="/meal-events/{{../mealEvent._id}}/cancel" method="POST">
            <button type="submit">Cancel attendance</button>
          </form>
        {{/ifeqId}}
      {{/each}} --}}

      {{!-- if current user is a pending guest --}}
      {{!-- {{#each mealEvent.pendingGuests}}
        {{#ifeqId this._id ../userInfo._id}}
          <button>Pending</button>
        {{/ifeqId}}
      {{/each}} --}}

    {{/ifeqId}}

      {{!-- // TO BE IMPROVED --}}
      {{!-- if current user is not a pending guest && not a host --}}
{{!-- 
    {{#ifneqId mealEvent.host._id userInfo._id }}
      <form action="/meal-events/{{mealEvent._id}}/attend" method="POST">
        <button type="submit">Attend</button>
      </form>
    {{/ifneqId }}

    {{#each mealEvent.acceptedGuests}}
      {{#ifneqId this._id ../userInfo._id}}
        <form action="/meal-events/{{../mealEvent._id}}/attend" method="POST">
          <button type="submit">Attend</button>
        </form>
      {{/ifneqId }}
    {{/each}}


    {{#each mealEvent.pendingGuests}}
      {{#ifneqId this._id ../userInfo._id}}
        <form action="/meal-events/{{../mealEvent._id}}/attend" method="POST">
          <button type="submit">Attend</button>
        </form>
      {{/ifneqId }}
    {{/each}} --}}
  </div>
</div>


